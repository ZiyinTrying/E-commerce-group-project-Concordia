{"ast":null,"code":"var _jsxFileName = \"/Users/gracechen/Documents/Documents - Grace\\u2019s MacBook Pro/concordia-bootcamps/project-GROUP-e-commerce/client/src/components/ItemDetails.js\";\nimport React, { useContext, useState, useEffect } from \"react\";\nimport { useParams } from \"react-router\";\nimport styled from \"styled-components\";\nimport { ItemsContext } from \"./ItemsContext\";\nimport Button from \"./Button\";\n\nconst ItemDetails = () => {\n  const {\n    _id\n  } = useParams(); //consuming array where we gonna store selected items\n\n  const {\n    cartItems,\n    setCartItems,\n    setReRender,\n    reRender\n  } = useContext(ItemsContext); //variable to store fetch result\n\n  const [item, setItem] = useState(null); //variable to store number of items user wants to put to the cart\n\n  const [quantity, setQuantity] = useState(1);\n  useEffect(() => {\n    fetch(`/items/${_id}`).then(res => res.json()).then(data => setItem(data.data)).catch(err => {\n      console.log(\"error\");\n    });\n  }, []); //decreases num of items by 1\n\n  const handleDecrement = () => {\n    if (quantity > 0) setQuantity(quantity - 1);\n  }; //increases num of items by 1\n\n\n  const handleIncrement = () => {\n    if (quantity <= item.numInStock - 1) setQuantity(quantity + 1);\n  }; //pushing selected item into array \"cartItems\", where we store all items user picks\n\n\n  const handleAddToCart = () => {\n    window.location.reload();\n    let myIndex; //searchin for an item in the array who's id matches the id of the item we are addin to the cart\n\n    let selectedItem = cartItems.find((element, index) => {\n      if (item._id === element._id) {\n        myIndex = index;\n      }\n\n      return item._id === element._id;\n    }); //if we find selected item in the array of items, add selected quantity to the existing one;\n\n    if (selectedItem) {\n      //if we don't have enough of items give an alert\n      if ((selectedItem === null || selectedItem === void 0 ? void 0 : selectedItem.quantity) + quantity > item.numInStock) {\n        window.alert(\"Not enough of items\");\n      } else {\n        let cartCopy = [...cartItems];\n        let newQuantity = selectedItem === null || selectedItem === void 0 ? void 0 : selectedItem.quantity;\n        cartCopy[myIndex] = { ...selectedItem,\n          quantity: quantity + newQuantity\n        };\n        setCartItems(cartCopy); // setReRender(!reRender)\n      }\n    } //if we don't have matching item in the array - push it in the array\n    else {\n        setCartItems([...cartItems, { ...item,\n          quantity: quantity\n        }]); // setReRender(!reRender)\n      }\n  }; //storing array with selected items in local storage if it's not empty\n\n\n  if ((cartItems === null || cartItems === void 0 ? void 0 : cartItems.length) !== 0) {\n    localStorage.setItem(\"cartItems\", JSON.stringify(cartItems));\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, item && /*#__PURE__*/React.createElement(Wrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Card, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(Image, {\n    src: item.imageSrc,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 25\n    }\n  }), /*#__PURE__*/React.createElement(Info, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 25\n    }\n  }, /*#__PURE__*/React.createElement(Name, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 29\n    }\n  }, item.name), /*#__PURE__*/React.createElement(InStock, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 29\n    }\n  }, \"In stock: \", item.numInStock), /*#__PURE__*/React.createElement(Price, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 95,\n      columnNumber: 29\n    }\n  }, item.price), /*#__PURE__*/React.createElement(Quantity, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 96,\n      columnNumber: 29\n    }\n  }, /*#__PURE__*/React.createElement(Btn, {\n    onClick: handleDecrement,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 33\n    }\n  }, \"-\"), /*#__PURE__*/React.createElement(Number, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 71\n    }\n  }, quantity), /*#__PURE__*/React.createElement(Btn, {\n    onClick: handleIncrement,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 97,\n      columnNumber: 98\n    }\n  }, \"+\")), quantity === item.numInStock + 1 || quantity === 0 ? /*#__PURE__*/React.createElement(Disabled, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 37\n    }\n  }, \"Add to cart\") : /*#__PURE__*/React.createElement(Button, {\n    onClick: handleAddToCart,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 105,\n      columnNumber: 37\n    }\n  }, \"Add to cart\")))));\n};\n\nconst Wrapper = styled.div`\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 85vh;\n    padding-top: 80px;\n`;\nconst Card = styled.div`\n    margin-top: 30px;\n    display: flex;\n    width: 900px;\n    padding: 20px;\n    border-radius: 10px;\n    transition: 0.4s ease-in-out;\n    background: var(--color-dark-grey);\n    color: var(--color-light-grey);\n    box-shadow: -2px 2px 10px 5px #cacaca;\n`;\nconst Image = styled.img`\n    flex: 1;\n    height: 100%;\n    border-radius: 10px;\n`;\nconst Info = styled.div`\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    flex: 1;\n    margin: 20px;\n`;\nconst Name = styled.div`\n    margin: 20px;\n    font-size: 24px;\n`;\nconst Price = styled.div`\n    margin: 20px;\n    text-align: left;\n    font-size: 24px;\n`;\nconst InStock = styled.div`\n    margin: 20px;\n    align-self: flex-start;\n`;\nconst Quantity = styled.div`\n    display: flex;\n    justify-content: center;\n    align-items: center;\n`;\nconst Number = styled.span`\n    margin: 10px;\n    color: var(--color-lime);\n    font-weight: 700;\n`;\nconst Btn = styled.button`\n    padding: 5px 10px;\n    border: 1px solid var(--color-dark-grey);\n    border-radius: 5px;\n`;\nconst Disabled = styled.button`\n    margin: 20px;\n    position: relative;\n    display: inline-block;\n    padding: 15px 30px;\n    background: var(--color-light-grey);\n    color: var(--color-dark-grey);\n    text-transform: uppercase;\n    font-weight: 700;\n    font-size: 24px;\n    overflow: hidden;\n    border: 2px solid var(--color-dark-grey);\n    border-radius: 5px;\n    &:hover{\n        cursor: not-allowed;\n    }\n`;\nexport default ItemDetails;","map":{"version":3,"sources":["/Users/gracechen/Documents/Documents - Graceâ€™s MacBook Pro/concordia-bootcamps/project-GROUP-e-commerce/client/src/components/ItemDetails.js"],"names":["React","useContext","useState","useEffect","useParams","styled","ItemsContext","Button","ItemDetails","_id","cartItems","setCartItems","setReRender","reRender","item","setItem","quantity","setQuantity","fetch","then","res","json","data","catch","err","console","log","handleDecrement","handleIncrement","numInStock","handleAddToCart","window","location","reload","myIndex","selectedItem","find","element","index","alert","cartCopy","newQuantity","length","localStorage","JSON","stringify","imageSrc","name","price","Wrapper","div","Card","Image","img","Info","Name","Price","InStock","Quantity","Number","span","Btn","button","Disabled"],"mappings":"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","sourcesContent":["import React, {useContext, useState, useEffect} from \"react\";\nimport { useParams } from \"react-router\";\n\nimport styled from \"styled-components\";\n\nimport { ItemsContext } from \"./ItemsContext\";\n\nimport Button from \"./Button\";\n\nconst ItemDetails = () => {\n    const {_id} = useParams();\n\n    //consuming array where we gonna store selected items\n    const {cartItems, setCartItems, setReRender, reRender} = useContext(ItemsContext);\n\n    //variable to store fetch result\n    const [item, setItem] = useState(null);\n\n    //variable to store number of items user wants to put to the cart\n    const [quantity, setQuantity] = useState(1);\n\n    useEffect(() => {\n        fetch(`/items/${_id}`)\n        .then(res => res.json())\n        .then(data => setItem(data.data))\n        .catch((err) => {\n            console.log(\"error\");\n        });\n    }, []);\n\n    //decreases num of items by 1\n    const handleDecrement = () => {\n        if (quantity > 0)\n        setQuantity(quantity - 1)\n    }\n\n    //increases num of items by 1\n    const handleIncrement = () => {\n        if (quantity <= item.numInStock - 1)\n        setQuantity(quantity + 1)\n    }\n\n    //pushing selected item into array \"cartItems\", where we store all items user picks\n    const handleAddToCart = () => { \n        window.location.reload()\n        let myIndex;\n\n        //searchin for an item in the array who's id matches the id of the item we are addin to the cart\n        let selectedItem = cartItems.find((element, index) => {\n            if (item._id === element._id){\n                myIndex = index;\n            }\n\n            return item._id === element._id;\n        })\n        \n        //if we find selected item in the array of items, add selected quantity to the existing one;\n        if (selectedItem) {\n            //if we don't have enough of items give an alert\n            if (selectedItem?.quantity + quantity > item.numInStock) {\n                window.alert(\"Not enough of items\")\n            }\n\n            else {\n                let cartCopy = [...cartItems];\n                let newQuantity = selectedItem?.quantity;\n                cartCopy[myIndex] = {...selectedItem, quantity: quantity + newQuantity}\n                setCartItems(cartCopy);\n                // setReRender(!reRender)\n            }\n        }\n        \n        //if we don't have matching item in the array - push it in the array\n        else {\n            setCartItems([...cartItems, {...item, quantity: quantity}]);\n            // setReRender(!reRender)\n        }\n    }\n\n     //storing array with selected items in local storage if it's not empty\n    if (cartItems?.length !== 0){\n        localStorage.setItem(\"cartItems\", JSON.stringify(cartItems));\n    }\n\n    return(\n        <>\n        {\n            item && (\n                <Wrapper>\n                    <Card>\n                        <Image src={item.imageSrc}/>\n                        <Info>\n                            <Name>{item.name}</Name>\n                            <InStock>In stock: {item.numInStock}</InStock>\n                            <Price>{item.price}</Price>\n                            <Quantity>\n                                <Btn onClick={handleDecrement}>-</Btn><Number>{quantity}</Number><Btn onClick={handleIncrement}>+</Btn>\n                            </Quantity>\n                            {\n                                quantity === item.numInStock + 1 || quantity === 0 ? (\n                                    <Disabled>\n                                        Add to cart\n                                    </Disabled>\n                                ) : (\n                                    <Button onClick={handleAddToCart}>Add to cart</Button>                   \n                                )\n                            }\n                        </Info>\n                    </Card>\n                </Wrapper>\n            )\n        }\n        </>\n    )\n}\n\nconst Wrapper = styled.div`\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    height: 85vh;\n    padding-top: 80px;\n`;\nconst Card = styled.div`\n    margin-top: 30px;\n    display: flex;\n    width: 900px;\n    padding: 20px;\n    border-radius: 10px;\n    transition: 0.4s ease-in-out;\n    background: var(--color-dark-grey);\n    color: var(--color-light-grey);\n    box-shadow: -2px 2px 10px 5px #cacaca;\n`;\nconst Image = styled.img`\n    flex: 1;\n    height: 100%;\n    border-radius: 10px;\n`;\nconst Info = styled.div`\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    flex: 1;\n    margin: 20px;\n`;\nconst Name = styled.div`\n    margin: 20px;\n    font-size: 24px;\n`;\nconst Price = styled.div`\n    margin: 20px;\n    text-align: left;\n    font-size: 24px;\n`;\nconst InStock = styled.div`\n    margin: 20px;\n    align-self: flex-start;\n`;\nconst Quantity = styled.div`\n    display: flex;\n    justify-content: center;\n    align-items: center;\n`;\nconst Number = styled.span`\n    margin: 10px;\n    color: var(--color-lime);\n    font-weight: 700;\n`;\nconst Btn = styled.button`\n    padding: 5px 10px;\n    border: 1px solid var(--color-dark-grey);\n    border-radius: 5px;\n`;\nconst Disabled = styled.button`\n    margin: 20px;\n    position: relative;\n    display: inline-block;\n    padding: 15px 30px;\n    background: var(--color-light-grey);\n    color: var(--color-dark-grey);\n    text-transform: uppercase;\n    font-weight: 700;\n    font-size: 24px;\n    overflow: hidden;\n    border: 2px solid var(--color-dark-grey);\n    border-radius: 5px;\n    &:hover{\n        cursor: not-allowed;\n    }\n`;\n\nexport default ItemDetails;"]},"metadata":{},"sourceType":"module"}